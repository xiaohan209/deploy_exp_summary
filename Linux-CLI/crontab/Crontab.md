# Crontab

>[菜鸟教程](https://www.runoob.com/linux/linux-comm-crontab.html)
>
>参考文章：
>
>- <https://www.linuxprobe.com/how-to-crontab.html>

### 介绍

Crontab是用来定期执行程序的命令，最小间隔为分钟。

Crontab每分钟会检查是否有要执行的工作，如果有便会自动执行该工作，因此新创建的cron任务需要过2分钟左右才能执行，也可以重启cron立刻执行。

### 使用

#### CLI语法

```sh
# 以文件执行
crontab [ -u user ] file
# 或
crontab [ -u user ] [ -i ] { -l | -r | -e }
```

| 参数 |                         说明                         |
| :--: | :--------------------------------------------------: |
|  -i  |        在删除用户的crontab文件时进行确认提示         |
|  -u  | 不输入默认为本用户，输入则必须有被指定用户时间表权限 |
|  -e  |              执行文字编辑器来设定时程表              |
|  -r  |                   删除目前的时程表                   |
|  -l  |                   列出目前的时程表                   |

#### 时间格式

在file中需要使用`f1 f2 f3 f4 f5 program`的格式进行任务的设置，具体意义为：

```bash
f1   f2   f3   f4   f5     program
|    |    |    |    |
|    |    |    |    +----- 星期中星期几 (0 - 6) (星期天为0)
|    |    |    +---------- 月份 (1 - 12) 
|    |    +--------------- 一个月中的第几天 (1 - 31)
|    +-------------------- 小时 (0 - 23)
+------------------------- 分钟 (0 - 59)
```

- `f1`表示分钟，`f2`表示小时，`f3`表示一个月份中的第几日，`f4`表示月份，`f5`表示一个星期中的第几天，`program`表示要执行的程序
- 时间为`*`时表示每隔此时间单位`t`都要执行`program`，例如`f1`为`*`即每分钟执行`program`
- 时间为`a-b` 表示从第`a`到第`b`个时间单位`t`执行`program`，例如`f2`为`3-5`即每天3点到5点执行`program`
- 时间为`*/n`时表示每n个时间单位`t`执行`program`，`f3`为`*/3`即每3天执行`program`
- 时间为`a,b,c`时表示第`a`，第`b`，第`c`个时间单位`t`执行`program`，例如`f4`为`1,3,5`即1月，3月，5月执行`program`

#### 注意

当程序在你所指定的时间执行后，系统会发一封邮件给当前的用户，显示该程序执行的内容，若是你不希望收到这样的邮件，请在每一行空一格之后加上`> /dev/null 2>&1`即可，如：

```
20 03 * * * . /etc/profile;/bin/sh /var/www/runoob/test.sh > /dev/null 2>&1 
```

